Description: Update documentation

Reflect #767148 fix, high precision now being default, and releases.
Clarify what hardware is supported.
Add Debian specific information.

Author: Rebecca N. Palmer <rebecca_palmer@zoho.com>

--- a/src/cl_device_id.c
+++ b/src/cl_device_id.c
@@ -907,7 +907,7 @@ cl_self_test(cl_device_id device, cl_sel
                     } else {
                       ret = SELF_TEST_SLM_FAIL;
                       printf("Beignet: self-test failed: (3, 7, 5) + (5, 7, 3) returned (%i, %i, %i)\n"
-                             "See README.md or http://www.freedesktop.org/wiki/Software/Beignet/\n",
+                             "This can usually be fixed by upgrading Linux to >= 4.2,\nsee /usr/share/doc/beignet-dev/Beignet.html or https://www.freedesktop.org/wiki/Software/Beignet/\n",
                              test_data[0], test_data[1], test_data[2]);
 
                     }
--- a/docs/Beignet/Backend.mdwn
+++ b/docs/Beignet/Backend.mdwn
@@ -37,9 +37,7 @@ Environment variables are used all over
   precision math instructions compliant with OpenCL Spec. So we provide a
   software version to meet the high precision requirement. Obviously the
   software version's performance is not as good as native version supported by
-  GEN hardware. What's more, most graphics application don't need this high
-  precision, so we choose 0 as the default value. So OpenCL apps do not suffer
-  the performance penalty for using high precision math functions.
+  GEN hardware.
 
 - `OCL_SIMD_WIDTH` `(8 or 16)`. Select the number of lanes per hardware thread,
   Normally, you don't need to set it, we will select suitable simd width for
--- /dev/null
+++ b/docs/index.mdwn
@@ -0,0 +1 @@
+[[!map pages="* and !ikiwiki/*" show=title]]
--- a/docs/Beignet.mdwn
+++ b/docs/Beignet.mdwn
@@ -16,6 +16,8 @@ News
 Prerequisite
 ------------
 
+(for building the upstream source; Debian packages handle this automatically)
+
 The project depends on the following external libraries:
 
 - libdrm libraries (libdrm and libdrm\_intel)
@@ -84,7 +86,7 @@ you need to configure it as below:
 
 CMake will check the dependencies and will complain if it does not find them.
 
-`> make`
+`> make utest`
 
 The cmake will build the backend firstly. Please refer to:
 [[OpenCL Gen Backend|Beignet/Backend]] to get more dependencies.
@@ -123,25 +125,17 @@ platform. Beignet also produces various
 consistency. This small test framework uses a simple c++ registration system to
 register all the unit tests.
 
-You need to call setenv.sh in the utests/ directory to set some environment variables
-firstly as below:
-
-`> . setenv.sh`
-
-Then in `utests/`:
+In Debian beignet, the testing tool is in the _beignet-dev_ package, and is run with:
 
-`> ./utest_run`
+`> /usr/lib/\`dpkg-architecture -qDEB_HOST_MULTIARCH\`/beignet/utest_run`
 
-will run all the unit tests one after the others
+(this name and path may change in future releases - please do not rely on it).  It will test the first OpenCL GPU device it finds (which does _not_ have to be a Beignet device).  If you want to test a different device, uninstall all other ICDs.  To see more options, pass `-h`.
 
-`> ./utest_run some_unit_test`
+If you compiled Beignet yourself, you will find this tool in `utests`, and will need to set some environment variables to use it (see `setenv.sh`).
 
-will only run `some_unit_test` test.
 
 On all supported target platform, the pass rate should be 100%. If it is not, you may
-need to refer the "Known Issues" section. Please be noted, the `. setenv.sh` is only
-required to run unit test cases. For all other OpenCL applications, don't execute that
-command.
+need to refer the "Known Issues" section.
 
 Normally, beignet needs to run under X server environment as normal user. If there isn't X server,
 beignet provides two alternative to run:
@@ -151,14 +145,22 @@ beignet provides two alternative to run:
 Supported Targets
 -----------------
 
+Beignet aims to support Gen7 to Gen9 Intel HD (not PowerVR) integrated GPUs, i.e:
+
  * 3rd Generation Intel Core Processors "Ivybridge".
  * 3rd Generation Intel Atom Processors "BayTrail".
  * 4th Generation Intel Core Processors "Haswell", need kernel patch if your linux kernel older than 4.2, see the "Known Issues" section.
  * 5th Generation Intel Core Processors "Broadwell".
  * 5th Generation Intel Atom Processors "Braswell".
- * 6th Generation Intel Core Processors "Skylake" and "Kabylake".
+ * 6th Generation Intel Core Processors "Skylake", "Kabylake" and "Coffeelake".
  * 5th Generation Intel Atom Processors "Broxten" or "Apollolake".
 
+As Beignet is being replaced by [Intel Compute Runtime (Neo)](https://01.org/compute-runtime) (likely to use the Debian package name intel-opencl-icd), future GPU models will probably _not_ be supported in Beignet.
+
+Not all processor models have an integrated GPU (Beignet does _not_ support running OpenCL on the CPU itself - see [pocl-opencl-icd](https://packages.debian.org/search?keywords=pocl-opencl-icd&searchon=names&exact=1&suite=all&section=all) for that).  Systems that also have a discrete GPU may disable the integrated GPU: check _xrandr --listproviders_ or see [here](https://nouveau.freedesktop.org/wiki/Optimus/).
+
+Attempting to run Beignet on unsupported hardware should return CL_DEVICE_NOT_FOUND; if it does anything else (especially crashing) please [report a bug](#howtocontribute).
+
 OpenCL 2.0
 ----------
 From release v1.3.0, beignet supports OpenCL 2.0 on Skylake and later hardware.
@@ -188,7 +190,7 @@ Known Issues
   forever until a reboot.
 
 * "Beignet: self-test failed" and almost all unit tests fail.
-  Linux 3.15 and 3.16 (commits [f0a346b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=f0a346bdafaf6fc4a51df9ddf1548fd888f860d8)
+  Linux 3.15 and upstream 3.16 (_not_ Debian jessie 3.16; commits [f0a346b](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=f0a346bdafaf6fc4a51df9ddf1548fd888f860d8)
   to [c9224fa](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=c9224faa59c3071ecfa2d4b24592f4eb61e57069))
   enable the register whitelist by default but miss some registers needed
   for Beignet.
@@ -202,10 +204,11 @@ Known Issues
   Linux <= 4.0, and requires the i915.enable_ppgtt=2 [boot parameter](https://wiki.ubuntu.com/Kernel/KernelBootParameters)
   on Linux 4.1.
   
-  This is fixed in Linux 4.2; older versions can be fixed with
-  [this patch](https://01.org/zh/beignet/downloads/linux-kernel-patch-hsw-support).
+  This is fixed in Linux >= 4.2, which is the default in sid/stretch, and available from -backports in jessie:
+  
+  `sudo apt-get install -t jessie-backports linux-image-amd64`
   
-  If you do not need \_\_local, you can override the self-test with
+  (or -i686-pae).  If you do not need \_\_local, you can override the self-test with
   
   `export OCL_IGNORE_SELF_TEST=1`
   
@@ -224,6 +227,16 @@ Known Issues
   This extension is partially implemented(the most commonly used part), and we will implement
   other parts based on requirement.
 
+* When a command is waiting for an event, commands enqueued after it may execute before it, even in an "in order" queue.
+  
+  All Beignet command queues allow this out-of-order execution, even if CL\_QUEUE\_OUT\_OF\_ORDER\_EXEC\_MODE\_ENABLE is off.
+  However, they are close enough that typical (but not all) in-order-assuming code is likely to work: code that never explicitly waits for events runs in-order, and blocking copies also wait for previous commands to finish.  If you need a true in-order queue, see [this patch](https://lists.freedesktop.org/archives/beignet/2018-July/009213.html), but be aware it is only lightly tested.
+
+* Programs using Intel-specific extensions fail to compile.
+  
+  Debian opencl-c-headers is the standard (Khronos) headers, which splits some of these into separate files
+  (e.g. cl\_ext\_intel.h): search /usr/include/CL.  cl\_intel.h is in the beignet-dev package.
+
 Project repository
 ------------------
 Right now, we host our project on fdo at:
@@ -269,9 +282,9 @@ The official mail list is as below:
 [http://lists.freedesktop.org/mailman/listinfo/beignet](http://lists.freedesktop.org/mailman/listinfo/beignet)  
 The official bugzilla is at:
 [https://bugs.freedesktop.org/enter_bug.cgi?product=Beignet](https://bugs.freedesktop.org/enter_bug.cgi?product=Beignet)  
-You are welcome to submit beignet bug. Please be noted, please specify the exact platform
-information, such as BYT/IVB/HSW/BDW, and GT1/GT2/GT3. You can easily get this information
-by running the beignet's unit test.
+You may also [report bugs to Debian](https://www.debian.org/Bugs/Reporting) package beignet-opencl-icd.
+
+Please specify your hardware when reporting a bug: _reportbug beignet-opencl-icd_ will automatically include this information.
 
 Documents for OpenCL application developers
 -------------------------------------------
